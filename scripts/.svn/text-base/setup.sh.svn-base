#!/bin/bash

# dd if=/dev/zero of=floppy.img bs=1024 count=1440
# mke2fs -m 0 -F floppy.img
# mount -o loop floppy.img /mnt/floppy
# mkdir -p /mnt/floppy/boot/grub
# cp /usr/share/grub/i386-pc/stage1 /mnt/floppy/boot/grub/
# cp /usr/share/grub/i386-pc/stage2 /mnt/floppy/boot/grub/
# cp /usr/share/grub/i386-pc/e2fs_stage1_5 /mnt/floppy/boot/grub/
# umount /mnt/floppy
# echo "(fd2)  /root/floppy.img" > /tmp/device.map
# grub --no-curses --device-map=/tmp/device.map
#   > root (fd2)
#   > setup (fd2)
#   > quit
# dd if=floppy.img of=/dev/fd0
mount /mnt/os &&
cp kernel.elf /mnt/os &&
umount /mnt/os/
